// indebted and with much reference to dxmh's zmk-config

compatible = "zmk,combos";
#define LONG_TIMEOUT_MS 100
#define NORMAL_LAYERS 0 1 2 3 4 5
#define LOCK_LAYER 6

#define COMBO(NAME, BINDINGS, KEYPOS) \
  combo_##NAME { \
    bindings = <BINDINGS>; \
    key-positions = <KEYPOS>; \
    layers = <NORMAL_LAYERS>; \
  };

#define COMBO_LONG(NAME, BINDINGS, KEYPOS) \
  combo_##NAME { \
    bindings = <BINDINGS>; \
    key-positions = <KEYPOS>; \
    layers = <NORMAL_LAYERS>; \
    timeout-ms = <LONG_TIMEOUT_MS>; \
  };

#define LAYER_COMBO(NAME, BINDINGS, KEYPOS, LAYERS) \
  combo_##NAME { \
    bindings = <BINDINGS>; \
    key-positions = <KEYPOS>; \
    layers = <LAYERS>; \
  };

/*           34 Keys
╭──────────────╮ ╭──────────────╮
│ 0  1  2  3  4│ │ 5  6  7  8  9│
│10 11 12 13 14│ │15 16 17 18 19│
│20 21 22 23 24│ │25 26 27 28 29│
╰────────╮30 31│ │32 33╭────────╯
         ╰─────╯ ╰─────╯         */

/*           34 Keys
╭──────────────╮ ╭──────────────╮
│             0│ │ 1            │
│ 2  3  4  5  6│ │ 7  8  9 10 11│
│12 13 14 15 16│ │17 18 19 20 21│
│22 23 24 25 26│ │27 28 29 30 31│
│   32 33      │ │      34 35   │
╰────────╮36 37│ │38 39╭────────╯
         ╰─────╯ ╰─────╯         */

COMBO(tab, &kp TAB, 3 4)
COMBO(shift, &skq LSHFT, 9 10)
COMBO(ctrl, &sk LCTL, 23 24)
COMBO(backspace, &kp BSPC, 29 30)
COMBO(meta, &sk LMETA, 36 37)
COMBO(opt, &sk LALT, 38 39)
COMBO(q, &kp Q, 3 5)
COMBO(z, &kp Z, 21 23)
COMBO_LONG(capsword, &caps_word, 16 17)
LAYER_COMBO(lock, &tog LCK, 22 31 36 39, NORMAL_LAYERS LOCK_LAYER)